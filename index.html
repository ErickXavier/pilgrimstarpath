<!doctype html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="./css/style.css" rel="stylesheet">
		<link rel="stylesheet" href="./css/blaze.min.css">
		<link rel="stylesheet" href="./css/nmsicons.css">
		
		<script src="./js/mustache.min.js"></script>
		<script src="./js/zepto.min.js"></script>	
		<script src="./js/utils.js"></script>
		
		<title>PILGRIM STAR PATH</title>
	</head>
    
	<body onload="generateMap();">
		
		<ul class="c-nav c-nav--inline">
			<li class="c-nav__content nopadding"><img id="atlaslogo" src="./img/atlas_logo.png" class="o-image"/></li>
			<li class="c-nav__content nopadding" id="brand"><span style="font-size:19pt;">PIGRIM STAR PATH</span> <span class="c-badge c-badge--brand">v0.6</span></li>
		</ul>
		
		<div class="o-grid o-grid--wrap">
			<div id="infoparent" class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-40@small">
				<div id="info">
					<blockquote>Coordinate information</blockquote>
					
					<div class="c-card c-card--accordion u-high">

						<input type="checkbox" id="userlocationpanel" checked>
						<label class="c-card__item c-card__item--brand" for="userlocationpanel">User Location</label>
						<div class="c-card__item bluebg">
						
							<p class="c-paragraph">
								Enter your coordinates in <strong>ABCD:1234:5678:1234:5678</strong> format
							</p>
							
							<p class="c-paragraph">
								<input id="userlocation" class="c-field" type="text" placeholder="Place your location here">
							</p>							
							<div class="o-grid o-grid--wrap">
								<div class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-50@small nopadding">
									<div class="c-button panelbutton tealbg noinline" onclick="calculateLocation()"><i class="icon-street-view"></i> Draw Location</div>
								</div>
								<div class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-50@small nopadding">
									<div class="c-button panelbutton tealbg noinline" onclick="galSvg.drawBHZone()"><i class="icon-target-1"></i> Draw B.Hole Ring</div>
								</div>
							</div>
							
							<div id="errorMessage" class="c-alert c-alert--error hidden">
								<span class="card-title">Ooops</span>
								<p id="errorMessageText"></p>
							</div>								

							
							<div id="locationInfo" class="o-grid o-grid--wrap hidden">
								<div id="coordsvgp" class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-50@small nopadding">
									<svg id="coordsvg" xmlns="http://www.w3.org/2000/svg"></svg>
								</div>
								
								<div id="centerdistsvgp" class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-50@small nopadding">
									<svg id="centerdistsvg" xmlns="http://www.w3.org/2000/svg"></svg>
								</div>
							</div>
							
						</div>

						<input type="checkbox" id="destinationpanel" checked>
						<label class="c-card__item c-card__item--brand" for="destinationpanel">Destinations</label>
						<div class="c-card__item bluebg">
							<div class="c-paragraph">Enter destinations in coordinate format</div>
							<textarea id="destinationlocation" class="c-field" placeholder="Place destinations here"></textarea>
							
							<div class="o-grid o-grid--wrap">
								<div class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-50@small">
									<div class="c-button tealbg panelbutton noinline" onclick="destinationHandler.addBatch();">Add them</div>
								</div>
								<div class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-50@small">
									<div class="c-button tealbg panelbutton noinline" onclick="destinationHandler.addPilgrim();">Add Pilgrim</div>
								</div>
							</div>
							
							<div class="c-card c-card--accordion u-high" id="redditpanel">
								<input type="checkbox" id="reddittoggle">
								<label class="c-card__item c-card__item--brand" id="redditpanellabel" for="reddittoggle">Grab from <i class="icon-reddit"></i> <strong>Reddit</strong></label>
								<div class="c-card__item" id="redditpanelbg">
									<div class="c-button c-button--brand panelbutton redditbtn noinline" onclick="destinationHandler.grabRed('Last');">Last known locations</div>
									<div class="c-button c-button--brand panelbutton redditbtn noinline" onclick="destinationHandler.grabRed('Rec');">Recommended locations</div>
									<div class="c-button c-button--brand panelbutton redditbtn noinline" onclick="destinationHandler.addRedHub();">
										<i class="icon-globe"></i> Galactic Hub (R.E.)
									</div>
								</div>
							</div>
							
							<div id="destinationdata">
								<div class="c-card u-high" id="destinationlist"></div>
							</div>
						</div>
						
						<input type="checkbox" id="usergpspaneltoggle">
						<label class="c-card__item c-card__item--brand" for="usergpspaneltoggle">
							<span title="Computer Oriented Flight For Euclidean Explorers"><i class="icon-coffee"></i> C.O.F.F.E.E.</span><i class="icon-rocket"></i>
							<span class="c-badge c-badge--warning">Alpha</span>
						</label>
						<div class="c-card__item bluebg">
							<p>Welcome to the <strong>Computer Oriented Flight For Euclidean Explorers</strong></p>
							<p>This is your estimated route to <strong id="routedestinationtxt"><small>... draw your location and select some destination first! beep</small></strong></p>
							<div class="c-card u-high" id="routelist"></div>
						</div>
					</div>
				</div>
			</div>
			
			<div id="plotparent" class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-60@small">
				
				<div id="galmapp">
					<blockquote>Galaxy map</blockquote>					
					<div id="svgp">
						 <svg id="svgc" xmlns="http://www.w3.org/2000/svg"></svg>
					</div>
					
					<div class="c-badge c-badge--brand chipcenter">Galaxy center</div>
					<div class="c-badge c-badge--brand chipdestination">Destination</div>
					<div class="c-badge c-badge--brand chipuser">User Location</div>
					<div class="c-badge c-badge--brand chiphub">Galactic Hub</div>
				</div>
				
				<div id="directionsmap" class="hidden">
					<div class="o-grid o-grid--wrap">
						<div class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-50@small">
							<blockquote>Height map</blockquote>
							<div id="heightsvgp">
								<svg id="heightsvg" xmlns="http://www.w3.org/2000/svg"></svg>
							</div>
						</div>
						<div class="o-grid__cell o-grid__cell--width-100 o-grid__cell--width-50@small ">
							<blockquote>Compass <span class="c-badge c-badge--success">BETA</span></blockquote>
							<div id="compassp">
								<div>To reach <strong><span id="destinationnamecompass"></span></strong> follow this direction:</div>
								<div>Looking at the center, turn <span id="degreestxt"></span> degrees to your <span id="degreesdirtxt"></span></div>
								<svg id="compasssvg" xmlns="http://www.w3.org/2000/svg"></svg>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>	

		<div id="modalcolor" style="display:none;"></div>
		
		<script type="text/template" id="destinationtemplate">
				<div class="c-card__item destinationtemplaterow">
					<div class="o-grid o-grid--wrap">
						<div class="o-grid__cell o-grid__cell--width-10 nopadding targetSelect" title="Select as destination" onclick="destinationHandler.selectDest({{id}});">
							<button class="c-button u-xsmall">
								<i class="icon-target"></i>
							</button>
						</div>
						<div class="o-grid__cell o-grid__cell--width-10 nopadding targetSelect" title="Change destination color" onclick="destinationHandler.selectDestColor({{id}});">
							<button class="c-button u-xsmall">
								<i class="icon-brush"></i>
							</button>
						</div>
						<div class="o-grid__cell o-grid__cell--width-70">
							<input class="destinationname c-field" type="text" onchange="destinationHandler.updateDestName({{id}},this);" id="desttb{{id}}" value="{{name}}">
						</div>
						<div class="o-grid__cell o-grid__cell--width-10 nopadding">
							<button class="c-button  u-xsmall deletebtn" title="Delete this destination" onclick="destinationHandler.deleteDest({{id}});"><i class="icon-trash"></i></button>
						</div>			
					</div>
					
					<div class="o-grid o-grid--wrap">
						<div class="o-grid__cell">
							{{x}}:{{y}}:{{z}}
						</div>	
						<div class="o-grid__cell">{{distance}} ly</div>
						<div class="o-grid__cell">{{jumps}} jumps</div>
					</div>
				</div>
			</li>
		</script>
		
		<script type="text/template" id="routetemplate">
			<div  class="c-card__item destinationtemplaterow">Step {{i}} {{x}}:{{y}}:{{z}}</div>
		</script>
		
		<script type="text/template" id="modalcolortemplate">
			<div class="c-overlay" style="position:fixed; width:100%;height:100%;"></div>
			<div class="o-modal" style="color:black; position: fixed;">
				<div class="c-card">
					<header class="c-card__header">
					<h2 class="c-heading">Pick a color</h2>
					</header>
					<div class="c-card__body">
						<p>Changing <strong>{{name}} color</strong></p>

						<div>Select a predefined color: </div>
						<div id="predefinedcolors"></div>
						
						<div>Select one color with the ranges: </div>
						
						<div id="rgbranges">
							<input type="range" id="colorr" onchange="colorModalHandler.onChangeColor();" class="c-range c-range--error" min="0" max="255" step="1">
							<input type="range" id="colorg" onchange="colorModalHandler.onChangeColor();" class="c-range c-range--success" min="0" max="255" step="1">
							<input type="range" id="colorb" onchange="colorModalHandler.onChangeColor();" class="c-range c-range--info" min="0" max="255" step="1">
						</div>

						<div class="o-grid o-grid--wrap">
							<div class="o-grid__cell o-grid__cell--width-50 nopadding">
								Current color: 
								<div style="width:50px; height:50px;background-color :{{color}}"></div>			
							</div>
							<div class="o-grid__cell o-grid__cell--width-50 nopadding">
								New Color: 
								<div id="colordemo" style="width:50px; height:50px;background-color :{{color}}"></div>			
							</div>
						</div>												
					</div>

					<footer class="c-card__footer">
						<div class="c-input-group">
							<button type="button" class="c-button c-button--block c-button--brand" onclick='colorModalHandler.onColorOk();'>Apply</button>
							<button type="button" class="c-button c-button--block" onclick='colorModalHandler.closeColorModal();'>Cancel</button>
						</div>
					</footer>

				</div>
			</div>
		</script>
		
		<script type="text/javascript" src="./js/gdl.js"></script>
    </body>
</html>
